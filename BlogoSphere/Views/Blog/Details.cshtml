@model BlogoSphere.Models.Blog
@using BlogoSphere.Models

@{
	ViewBag.Title = "Details " + Model.Title;

	var postsByDate =
	from p in Model.Posts
	group p by p.Created.Year into yg
	select new
	{
		Year = yg.Key,
		MonthGroups =
			from o in yg
			group o by o.Created.Month into mg
			select new { Month = mg.Key, Posts = mg }
	};
}


<div class="container">
	<div class="row">
		@*<div class="col-8">@Html.Action("List", "Post", Model.Posts)</div>*@
		<div class="col-8">
			<div class="d-block w-100 bg-secondary rounded-bottom p-2 mb-3">
				@Html.ActionLink("Back to My Blogs", "Index", null, new { @class = "btn btn-danger" })
				@Html.ActionLink("Create New Blogpost", "Create", new { blogid = Model.Id }, new { @class = "btn btn-danger" })
			</div>
			@foreach (var post in Model.Posts)
			{
				@Html.Action("List", "Post", post)
			}
		</div>
		<div class="col-4">
			<dl class="mt-0 p-2 bg-secondary shadow rounded-bottom">
				<dd class="bg-light m-2 p-1 rounded">
					<h2 class="text-danger text-center text-uppercase">@Html.DisplayFor(model => model.Title)</h2>
				</dd>
				<dd class="bg-white m-2 p-2 rounded">
					@Html.DisplayFor(model => model.Body)
				</dd>
			</dl>

			<div class="w-100 bg-secondary shadow rounded p-2">
				<div class="bg-light m-2 p-1 pl-4 pb-3 rounded">
				@foreach (var Year in postsByDate)
				{
					<div class="h5 mt-2">@Year.Year</div>
					foreach (var Month in Year.MonthGroups)
					{
						<div class="pl-3"><a class="text-danger" href="#">@(new DateTime(Year.Year, Month.Month, 1).ToString("MMMM")) (@Month.Posts.Count())</a></div>
					}
				}
				</div>
			</div>
		</div>
	</div>
</div>
